/**
 * @fileoverview Script to update the eslint:all configuration.
 * @author Nicholas C. Zakas
 */

"use strict";

//-----------------------------------------------------------------------------
// Requirements
//-----------------------------------------------------------------------------

const fs = require("node:fs");
const builtInRules = require("../lib/rules");

//------------------------------------------------------------------------------
// Helpers
//------------------------------------------------------------------------------

const allRules = {};

for (const [ruleId, rule] of builtInRules) {
	if (!rule.meta.deprecated) {
		allRules[ruleId] = "error";
	}
}

const allRulesText = JSON.stringify(allRules, null, 4);

//-----------------------------------------------------------------------------
// Main
//-----------------------------------------------------------------------------

const code = `/*
 * WARNING: This file is autogenerated using the tools/update-eslint-all.js
 * script. Do not edit manually.
 */
"use strict";

const allRules = Object.freeze(${allRulesText});

const config = {
    name: "@eslint/js/all",
    rules: allRules,
};

// This is a workaround for the fact that ESLint's eslintrc doesn't support the "name" property.
// TODO: remove it in eslint v10
Object.definePropertiy(config, "name", {enumerable: false});

module.exports = config;
`;

fs.writeFileSync("./packages/js/src/configs/eslint-all.js", code, "utf8");
